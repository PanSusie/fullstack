(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(15),l=n.n(u),o=n(1),c=n.n(o),i=n(4),s=n(2),m=n(5),d=n.n(m),p=null,f={getAll:function(){return d.a.get("/api/blogs").then((function(e){return e.data}))},setToken:function(e){p="bearer ".concat(e)},create:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},e.next=3,d.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(c.a.mark((function e(t,n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/blogs/"+n,e.next=3,d.a.put(a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},a="/api/blogs/"+t,e.next=4,d.a.delete(a,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(e){var t=e.blog,n=e.user,u=e.addLike,l=Object(a.useState)(!1),o=Object(s.a)(l,2),c=o[0],i=o[1],m=Object(a.useState)(t.likes),d=Object(s.a)(m,2),p=d[0],b=d[1],v={display:c?"none":""},g={display:c?"":"none"};u=function(e){e.preventDefault();var n={likes:t.likes++,author:t.author,title:t.title,url:t.url};f.update(n,t.id).then((function(){b(t.likes)}))};return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5}},t.title,"  ",t.author,r.a.createElement("button",{style:v,onClick:function(){return i(!0)}},"view"),r.a.createElement("button",{style:g,onClick:function(){return i(!1)}},"hide"),r.a.createElement("div",{style:g,className:"invisibleContent"},r.a.createElement("div",null,t.url),r.a.createElement("div",null,"likes ",p,r.a.createElement("form",{onSubmit:u},r.a.createElement("button",{type:"submit",className:"likeButton"},"like"))),r.a.createElement("div",null,t.user.username),t.user.username===n.username?r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),window.confirm("remove blog ".concat(t.title," by ").concat(t.author))&&f.remove(t.id)}},r.a.createElement("button",{type:"submit"},"remove")):""))},v=function(e){var t=e.blogObject,n=e.setBlogs,a=e.setNotification,u=e.handleTitleChange,l=e.handleAuthorChange,o=e.handleUrlChange,c=e.blogs,i=e.title,s=e.url,m=e.author;return r.a.createElement("div",null,r.a.createElement("h2",null,"create new blog"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t={title:i,author:m,url:s},console.log(t),f.create(t).then((function(e){n(c.concat(e))})),a("a new blog ".concat(i," by ").concat(m," added")),setTimeout((function(){a(null)}),5e3)}},r.a.createElement("div",null,"title:",r.a.createElement("input",{value:i,onChange:u,className:"title"})),r.a.createElement("div",null,"author:",r.a.createElement("input",{value:m,onChange:l,className:"author"})),r.a.createElement("div",null,"url:",r.a.createElement("input",{value:s,onChange:o,className:"url"})),r.a.createElement("button",{type:"submit"},"create")))},g={login:function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=(n(39),function(e){var t=e.username,n=e.password,a=e.handleLogin,u=e.handleUsername,l=e.handlePassword;return r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,"username",r.a.createElement("input",{type:"text",value:t,name:"Username",id:"username",onChange:u})),r.a.createElement("div",null,"password",r.a.createElement("input",{type:"password",value:n,name:"Password",id:"password",onChange:l})),r.a.createElement("button",{type:"submit",id:"login-buttun"},"login"))}),E=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],u=t[1],l=Object(a.useState)(""),o=Object(s.a)(l,2),m=o[0],d=o[1],p=Object(a.useState)(""),E=Object(s.a)(p,2),w=E[0],O=E[1],j=Object(a.useState)(null),y=Object(s.a)(j,2),k=y[0],S=y[1],C=Object(a.useState)(null),x=Object(s.a)(C,2),N=x[0],U=x[1],T=Object(a.useState)(null),A=Object(s.a)(T,2),B=A[0],D=A[1],I=Object(a.useState)(""),J=Object(s.a)(I,2),L=J[0],P=J[1],z=Object(a.useState)(""),F=Object(s.a)(z,2),W=F[0],q=F[1],G=Object(a.useState)(""),H=Object(s.a)(G,2),K=H[0],M=H[1],Q=Object(a.useState)(!1),R=Object(s.a)(Q,2),V=R[0],X=R[1];Object(a.useEffect)((function(){f.getAll().then((function(e){return u(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);D(t),f.setToken(t.token)}}),[]);var Y=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.login({username:m,password:w});case 4:n=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),D(n),d(""),O(""),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),S("wrong username or password"),setTimeout((function(){S(null)}),5e3);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.localStorage.removeItem("loggedUser");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){P(e.target.value)},_=function(e){q(e.target.value)},ee=function(e){M(e.target.value)};return r.a.createElement("div",null,r.a.createElement("h2",null,"blogs"),null===k?null:r.a.createElement("p",{className:"error"},k),null===N?null:r.a.createElement("p",{className:"note"},N),null===B?r.a.createElement(h,{username:m,password:w,handleLogin:Y,handleUsername:function(e){d(e.target.value)},handlePassword:function(e){O(e.target.value)}}):function(){var e=n.sort((function(e,t){return parseFloat(t.likes)-parseFloat(e.likes)}));return r.a.createElement("div",null,B.username," logged in",r.a.createElement("form",{onSubmit:Z},r.a.createElement("button",{type:"submit"},"logout")),function(){var e={display:V?"none":""},t={display:V?"":"none"};return r.a.createElement("div",null,r.a.createElement("div",{style:e},r.a.createElement("button",{onClick:function(){return X(!0)}}," new note ")),r.a.createElement("div",{style:t},r.a.createElement(v,{blogs:n,setBlogs:u,handleTitleChange:$,handleAuthorChange:_,handleUrlChange:ee,title:L,url:K,author:W,setNotification:U}),r.a.createElement("button",{onClick:function(){return X(!1)}},"cancel")))}(),e.map((function(e){return r.a.createElement(b,{key:e.id,blog:e,user:B})})))}())};l.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.6e2dafdb.chunk.js.map