{"version":3,"sources":["services/blogs.js","components/Blog.js","components/AddBlogForm.js","services/login.js","components/Login.js","App.js","index.js"],"names":["token","getAll","axios","get","then","response","data","setToken","newToken","create","newObject","a","config","headers","Authorization","post","update","id","url","baseUrl","put","remove","delete","Blog","blog","user","addLike","useState","visible","setVisible","likes","setLikes","hideWhenVisible","display","showWhenVisible","event","preventDefault","blogObject","author","title","blogService","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","onClick","className","onSubmit","type","username","window","confirm","AddBlogForm","setBlogs","setNotification","handleTitleChange","handleAuthorChange","handleUrlChange","blogs","console","log","returnBlog","concat","setTimeout","value","onChange","login","credentials","LoginForm","password","handleLogin","handleUsername","handlePassword","name","App","setUsername","setPassword","errorMessage","setErrorMessage","notification","setUser","setTitle","setAuthor","setUrl","useEffect","loggedUser","localStorage","getItem","JSON","parse","loginService","setItem","stringify","handleLogout","removeItem","target","Login","blogSort","sort","b","parseFloat","addBlogForm","map","key","blogForm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6e2dafdb.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\n\nconst update = async (newObject, id) => {\n\n  const url = baseUrl +'/'+ id\n  const response = await axios.put(url, newObject)\n  return response.data\n}\n\nconst remove = async (id) => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  const url = baseUrl +'/'+ id\n  const response = await axios.delete(url, config)\n  return response.data\n}\n\nexport default { getAll, setToken, create, update, remove }\n","import React, { useState } from 'react'\r\nimport blogService from '../services/blogs'\r\n\r\nconst Blog = ({ blog, user, addLike }) => {\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const [visible, setVisible] = useState(false)\r\n  const [likes, setLikes] = useState(blog.likes)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  addLike = (event) => {\r\n    event.preventDefault()\r\n\r\n    const blogObject = {\r\n      likes: blog.likes++,\r\n      author: blog.author,\r\n      title: blog.title,\r\n      url: blog.url\r\n    }\r\n\r\n    blogService\r\n      .update(blogObject, blog.id)\r\n      .then(() => {\r\n        setLikes(blog.likes)\r\n      })\r\n  }\r\n\r\n  const removeBlog = (event) => {\r\n    event.preventDefault()\r\n    if (window.confirm(`remove blog ${blog.title} by ${blog.author}`)){\r\n      blogService\r\n        .remove(blog.id)\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div style={blogStyle}>\r\n      {blog.title}  {blog.author}\r\n      <button style={hideWhenVisible} onClick={() => setVisible(true)}>view</button>\r\n      <button style={showWhenVisible} onClick={() => setVisible(false)}>hide</button>\r\n\r\n      <div style={showWhenVisible} className='invisibleContent'>\r\n        <div>{blog.url}</div>\r\n        <div>\r\n        likes {likes}\r\n          <form onSubmit={addLike}>\r\n            <button type='submit' className='likeButton'>like</button>\r\n          </form>\r\n        </div>\r\n        <div>{blog.user.username}</div>\r\n\r\n        {blog.user.username === user.username ?\r\n          <form onSubmit={removeBlog}>\r\n            <button type='submit'>remove</button>\r\n          </form> :\r\n          ''\r\n        }\r\n\r\n      </div>\r\n    </div>\r\n  )}\r\n\r\nexport default Blog\r\n","import React from 'react'\nimport blogService from '../services/blogs'\n\nconst AddBlogForm = ({\n  blogObject,\n  setBlogs,\n  setNotification,\n  handleTitleChange,\n  handleAuthorChange,\n  handleUrlChange,\n  blogs,\n  title,\n  url,\n  author\n}) => {\n\n  const addBlog = (event) => {\n    event.preventDefault()\n    blogObject = {\n      title: title,\n      author: author,\n      url: url\n    }\n\n    console.log(blogObject)\n\n    blogService\n      .create(blogObject)\n      .then(returnBlog => {\n        setBlogs(blogs.concat(returnBlog))\n      })\n\n    setNotification(`a new blog ${title} by ${author} added`)\n    setTimeout(() => {\n      setNotification(null)\n    },5000)\n  }\n\n\n  return (\n    <div>\n      <h2>create new blog</h2>\n      <form onSubmit={addBlog}>\n        <div>\n      title:\n          <input\n            value={title}\n            onChange={handleTitleChange}\n            className=\"title\"\n          />\n        </div>\n        <div>\n      author:\n          <input\n            value={author}\n            onChange={handleAuthorChange}\n            className=\"author\"\n          />\n        </div>\n        <div>\n    url:\n          <input\n            value={url}\n            onChange={handleUrlChange}\n            className=\"url\"\n          />\n        </div>\n        <button type='submit'>create</button>\n      </form>\n    </div>\n  )\n}\n\nexport default AddBlogForm\n","import axios from 'axios'\nconst baseUrl = 'api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default {login}\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst LoginForm = ({\n  username,\n  password,\n  handleLogin,\n  handleUsername,\n  handlePassword\n}) => {\n\n  return (\n    <form onSubmit={handleLogin}>\n      <div>\n      username\n        <input\n          type=\"text\"\n          value={username}\n          name=\"Username\"\n          id=\"username\"\n          onChange={handleUsername}\n        />\n      </div>\n      <div>\n      password\n        <input\n          type=\"password\"\n          value={password}\n          name=\"Password\"\n          id=\"password\"\n          onChange={handlePassword}\n        />\n      </div>\n      <button\n        type=\"submit\"\n        id=\"login-buttun\"\n      >login</button>\n    </form>\n  )\n}\n\nLoginForm.propTypes = {\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired,\n  handleLogin: PropTypes.func.isRequired,\n  handleUsername: PropTypes.func.isRequired,\n  handlePassword: PropTypes.func.isRequired,\n}\n\nexport default LoginForm\n","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport AddBlogForm from './components/AddBlogForm'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport './index.css'\nimport LoginForm from './components/Login'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [notification, setNotification] = useState(null)\n  const [user, setUser] = useState(null)\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n  const [visible, setVisible] = useState(false)\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUser = window.localStorage.getItem('loggedUser')\n    if (loggedUser){\n      const user = JSON.parse(loggedUser)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n  },[])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n\n      window.localStorage.setItem(\n        'loggedUser', JSON.stringify(user)\n      )\n\n      setUser(user)\n      setUsername('')\n      setPassword('')\n    } catch (exception) {\n      setErrorMessage('wrong username or password')\n      setTimeout(() => {\n        setErrorMessage(null)\n      },5000)\n    }\n  }\n\n  const handleLogout = async (event) => {\n    event.preventDefault()\n    window.localStorage.removeItem('loggedUser')\n  }\n\n  const handleUsername = (event) => {\n    setUsername(event.target.value)\n  }\n\n  const handlePassword = (event) => {\n    setPassword(event.target.value)\n  }\n\n  const handleTitleChange = (event) => {\n    setTitle(event.target.value)\n  }\n\n  const handleAuthorChange = (event) => {\n    setAuthor(event.target.value)\n  }\n\n  const handleUrlChange = (event) => {\n    setUrl(event.target.value)\n  }\n\n  const addBlogForm = () => {\n    const hideWhenVisible = { display: visible ? 'none' : '' }\n    const showWhenVisible = { display: visible ? '' : 'none' }\n\n    return (\n      <div>\n        <div style={hideWhenVisible}>\n          <button onClick={() => setVisible(true)}> new note </button>\n        </div>\n        <div style={showWhenVisible}>\n          <AddBlogForm\n            blogs={blogs}\n            setBlogs={setBlogs}\n            handleTitleChange={handleTitleChange}\n            handleAuthorChange={handleAuthorChange}\n            handleUrlChange={handleUrlChange}\n            title={title}\n            url={url}\n            author={author}\n            setNotification={setNotification}\n          />\n          <button onClick={() => setVisible(false)}>cancel</button>\n        </div>\n      </div>\n    )\n  }\n\n\n\n  const blogForm = () => {\n\n    const blogSort = blogs.sort((a, b) =>\n      parseFloat(b.likes) - parseFloat(a.likes)\n    )\n\n    return(\n      <div>\n        {user.username} logged in\n        <form onSubmit={handleLogout}>\n          <button type=\"submit\">logout</button>\n        </form>\n        {addBlogForm()}\n        {blogSort.map(blog =>\n          <Blog key={blog.id} blog={blog} user={user}/>\n        )}\n\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <h2>blogs</h2>\n      {errorMessage === null?\n        null :\n        <p className=\"error\">{errorMessage}</p>\n      }\n      {notification === null?\n        null :\n        <p className=\"note\">{notification}</p>\n      }\n      {user === null?\n        <LoginForm  username={username}\n          password={password}\n          handleLogin={handleLogin}\n          handleUsername={handleUsername}\n          handlePassword={handlePassword}\n        /> :\n        blogForm()\n      }\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}